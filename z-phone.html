<!--
  # phone

  手机壳

  ## Attributes

  * `innerwidth`: 根据手机内容需要的宽度适配手机壳的大小

  ## Example

  ```
  <z-phone>
    ...
  </z-phone>
  ```
-->

<link rel="import" href="http://g.tbcdn.cn/mtb/lib-3rd/polymer/polymer.html">

<polymer-element name="z-phone" attributes="innerwidth, size, bgimg">

  <template>
    <style>
      :host {display: inline-block;}
      #background {min-width: 180px; height: 333px; box-sizing: border-box; margin: auto; background: transparent none no-repeat center center; background-size: contain;}
      #scroller {overflow: auto;}
    </style>
    <div id="background" layout vertical style="{{bgStyle}}">
      <div id="scroller" flex>
        <content></content>
      </div>
    </div>
  </template>

  <script>

    Polymer('z-phone', {
      size: {
        width: 360,
        height: 665,
        top: 48,
        side: 20,
        bottom: 57
      },
      bgimg: 'http://gtms03.alicdn.com/tps/i3/TB1z8_ZHXXXXXbrXVXXKptRJVXX-360-665.png',
      innerwidth: 320,
      calcBgStyle: function (innerwidth, bgimg, size) {
        console.log(innerwidth, bgimg, size);
        var top = 0;
        var bottom = 0;
        var side = 0;

        var width = size.width;
        var height = size.height;
        var scale = innerwidth / (size.width - size.side * 2);

        width = size.width * scale;
        height = size.height * scale;
        top = size.top * scale;
        bottom = size.bottom * scale;
        side = size.side * scale;

        return 'width:' + width + 'px; height:' + height + 'px; padding: ' + top + 'px ' + side + 'px ' + bottom + 'px; background-image: url(' + bgimg + ');';
      },
      computed: {
        bgStyle: 'calcBgStyle(innerwidth, bgimg, size)'
      }
    });

  </script>

</polymer-element>

