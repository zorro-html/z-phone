<!--
  # phone

  手机壳

  ## Attributes

  * `innerwidth`: 根据手机内容需要的宽度适配手机壳的大小

  ## Example

  ```
  <z-phone>
    ...
  </z-phone>
  ```
-->

<!--
  iOS：//img.alicdn.com/tps/i3/TB1Wr66HXXXXXaBXXXXlu5hPVXX-373-777.png (374,777,102,102,27)
  安卓：//img.alicdn.com/tps/i3/TB1z8_ZHXXXXXbrXVXXKptRJVXX-360-665.png (360,665,48,20,57)
-->

<link rel="import" href="//g.alicdn.com/mtb/lib-3rd/polymer/polymer.html">
<link rel="import" href="../z-script/ext/link.html">

<polymer-element name="z-phone" attributes="innerwidth, size, bgimg">

  <template>
    <style>
      :host {display: inline-block;}
      #background {min-width: 180px; height: 333px; box-sizing: border-box; margin: auto; background: transparent none no-repeat; background-size: contain;}
      #scroller {overflow: auto;}
    </style>
    <div id="background" layout vertical style="{{bgStyle}}">
      <div id="scroller" flex>
        <content></content>
      </div>
    </div>
  </template>

  <script>
    (function () {
      var baseURI = getBaseURI(document);

      Polymer('z-phone', {
        size: {
          width: 360,
          height: 665,
          top: 48,
          side: 20,
          bottom: 57
        },
        bgimg: getFullURL('phone.png', baseURI),
        innerwidth: 320,
        calcBgStyle: function (innerwidth, bgimg, size) {
          var top = 0;
          var bottom = 0;
          var side = 0;

          var width = size.width;
          var height = size.height;
          var scale = innerwidth / (size.width - size.side * 2);

          width = size.width * scale;
          height = size.height * scale;
          top = size.top * scale;
          bottom = size.bottom * scale;
          side = size.side * scale;

          return 'width:' + width + 'px; height:' + height + 'px; padding: ' + top + 'px ' + side + 'px ' + bottom + 'px; background-image: url(' + bgimg + ');';
        },
        computed: {
          bgStyle: 'calcBgStyle(innerwidth, bgimg, size)'
        }
      });
    })();
  </script>

</polymer-element>

